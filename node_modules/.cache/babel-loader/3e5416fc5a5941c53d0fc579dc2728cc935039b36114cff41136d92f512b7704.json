{"ast":null,"code":"import _defineProperty from \"C:/Users/naman/Desktop/myapp/myapp/travel-planner/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"C:/Users/naman/Desktop/myapp/myapp/travel-planner/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"C:/Users/naman/Desktop/myapp/myapp/travel-planner/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { __awaiter as t } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { appendToCognitoUserAgent as n } from \"@aws-amplify/auth\";\nimport { waitFor as i } from \"xstate/lib/waitFor.js\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a, emailRegex as o } from \"./constants.mjs\";\nimport { getActorState as s } from \"./actor.mjs\";\nimport { isFunction as r } from \"../../utils/index.mjs\";\nvar c = function c(_ref) {\n    var t = _ref.packageName,\n      e = _ref.version;\n    n(\"\".concat(t, \"/\").concat(e));\n  },\n  l = function l(t) {\n    var e = t.trim().split(\"\");\n    for (var _t = 0; _t < e.length; _t++) _t > 0 && _t < e.length - 1 && (e[_t] = \"*\");\n    return e.join(\"\");\n  },\n  u = function u(t) {\n    if (t.length < 4) return t;\n    var e = t.split(\"\");\n    for (var _t2 = 0; _t2 < e.length - 4; _t2++) e[_t2] = \"*\";\n    return e.join(\"\");\n  },\n  m = function m(e) {\n    return t(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return i(e, function (t) {\n              return s(t).matches(\"autoSignIn\");\n            });\n          case 3:\n            _context.next = 7;\n            break;\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n  },\n  d = function d(_ref2, i, a) {\n    var _ref2$payload = _ref2.payload,\n      e = _ref2$payload.data,\n      n = _ref2$payload.event;\n    return t(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var t, o, _ref3, c, l, _n, _n2;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            t = i.send, o = i.getSnapshot(), _ref3 = null != a ? a : {}, c = _ref3.onSignIn, l = _ref3.onSignOut;\n            _context2.t0 = n;\n            _context2.next = _context2.t0 === \"tokenRefresh\" ? 4 : _context2.t0 === \"autoSignIn\" ? 6 : _context2.t0 === \"autoSignIn_failure\" ? 12 : _context2.t0 === \"signIn\" ? 17 : _context2.t0 === \"signOut\" ? 19 : _context2.t0 === \"tokenRefresh_failure\" ? 19 : 20;\n            break;\n          case 4:\n            o.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\");\n            return _context2.abrupt(\"break\", 20);\n          case 6:\n            if (o.matches(\"authenticated\")) {\n              _context2.next = 11;\n              break;\n            }\n            _context2.next = 9;\n            return m(i);\n          case 9:\n            _n = s(i.getSnapshot());\n            (null == _n ? void 0 : _n.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN\",\n              data: e\n            });\n          case 11:\n            return _context2.abrupt(\"break\", 20);\n          case 12:\n            _context2.next = 14;\n            return m(i);\n          case 14:\n            _n2 = s(i.getSnapshot());\n            (null == _n2 ? void 0 : _n2.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN_FAILURE\",\n              data: e\n            });\n            return _context2.abrupt(\"break\", 20);\n          case 17:\n            r(c) && c();\n            return _context2.abrupt(\"break\", 20);\n          case 19:\n            r(l) && l(), o.matches(\"authenticated.idle\") && t(\"SIGN_OUT\");\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n  },\n  h = function h(t) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : d;\n    return e.listen(\"auth\", function (t, e) {\n      return function (n) {\n        e(n, t);\n      };\n    }(t, n), \"authenticator-hub-handler\");\n  },\n  p = function p(t) {\n    return a.some(function (e) {\n      return t.includes(e);\n    });\n  },\n  f = function f(t, e, n) {\n    return encodeURI(\"otpauth://totp/\".concat(t, \":\").concat(e, \"?secret=\").concat(n, \"&issuer=\").concat(t));\n  };\nfunction g(t) {\n  for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    e[_key - 1] = arguments[_key];\n  }\n  return Object.entries(t).reduce(function (t, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      n = _ref5[0],\n      i = _ref5[1];\n    return Object.assign(Object.assign({}, t), _defineProperty({}, n, e.includes(n) ? i : null == i ? void 0 : i.trim()));\n  }, {});\n}\nvar I = function I(t) {\n  return !!t && o.test(t);\n};\nexport { l as censorAllButFirstAndLast, u as censorPhoneNumber, c as configureComponent, d as defaultAuthHubHandler, f as getTotpCodeURL, p as hasSpecialChars, I as isValidEmail, h as listenToAuthHub, g as trimValues };","map":{"version":3,"names":["__awaiter","t","Hub","e","appendToCognitoUserAgent","n","waitFor","i","ALLOWED_SPECIAL_CHARACTERS","a","emailRegex","o","getActorState","s","isFunction","r","c","_ref","packageName","version","concat","l","trim","split","length","join","u","m","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","matches","t0","stop","d","_ref2","_ref2$payload","payload","data","event","_callee2","_ref3","_n","_n2","_callee2$","_context2","send","getSnapshot","onSignIn","onSignOut","abrupt","type","h","arguments","undefined","listen","p","some","includes","f","encodeURI","g","_len","Array","_key","Object","entries","reduce","_ref4","_ref5","_slicedToArray","assign","_defineProperty","I","test","censorAllButFirstAndLast","censorPhoneNumber","configureComponent","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","isValidEmail","listenToAuthHub","trimValues"],"sources":["C:/Users/naman/Desktop/myapp/myapp/travel-planner/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{appendToCognitoUserAgent as n}from\"@aws-amplify/auth\";import{waitFor as i}from\"xstate/lib/waitFor.js\";import{ALLOWED_SPECIAL_CHARACTERS as a,emailRegex as o}from\"./constants.mjs\";import{getActorState as s}from\"./actor.mjs\";import{isFunction as r}from\"../../utils/index.mjs\";const c=({packageName:t,version:e})=>{n(`${t}/${e}`)},l=t=>{const e=t.trim().split(\"\");for(let t=0;t<e.length;t++)t>0&&t<e.length-1&&(e[t]=\"*\");return e.join(\"\")},u=t=>{if(t.length<4)return t;const e=t.split(\"\");for(let t=0;t<e.length-4;t++)e[t]=\"*\";return e.join(\"\")},m=e=>t(void 0,void 0,void 0,(function*(){try{yield i(e,(t=>s(t).matches(\"autoSignIn\")))}catch(t){}})),d=({payload:{data:e,event:n}},i,a)=>t(void 0,void 0,void 0,(function*(){const{send:t}=i,o=i.getSnapshot(),{onSignIn:c,onSignOut:l}=null!=a?a:{};switch(n){case\"tokenRefresh\":o.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\");break;case\"autoSignIn\":if(!o.matches(\"authenticated\")){yield m(i);const n=s(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e})}break;case\"autoSignIn_failure\":{yield m(i);const n=s(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e});break}case\"signIn\":r(c)&&c();break;case\"signOut\":case\"tokenRefresh_failure\":r(l)&&l(),o.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\")}})),h=(t,n=d)=>e.listen(\"auth\",((t,e)=>n=>{e(n,t)})(t,n),\"authenticator-hub-handler\"),p=t=>a.some((e=>t.includes(e))),f=(t,e,n)=>encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);function g(t,...e){return Object.entries(t).reduce(((t,[n,i])=>Object.assign(Object.assign({},t),{[n]:e.includes(n)?i:null==i?void 0:i.trim()})),{})}const I=t=>!!t&&o.test(t);export{l as censorAllButFirstAndLast,u as censorPhoneNumber,c as configureComponent,d as defaultAuthHubHandler,f as getTotpCodeURL,p as hasSpecialChars,I as isValidEmail,h as listenToAuthHub,g as trimValues};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}